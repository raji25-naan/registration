const { Router } = require('express');
const express = require('express');
const { updateOne } = require('./infoschema');
const infoschema = require('./infoschema');
const router = express.Router();


// router.get('/',(req,res)=>{
    
//     console.log("hai world");
// });


router.post('/post', async (req, res)=> {
    console.log(1);
    console.log(req);
    const data =   new infoschema({
        firstname : req.body.firstname,
        lastname  : req.body.lastname,
        Email :req.body.Email,
        MobileNumber : req.body.MobileNumber,
        password :req.body.password,
        ConfirmPassword : req.body.ConfirmPassword,
        
    });
    const savedata = await data.save();
    return res.send(savedata);
});


router.get('/find',async(req,res)  =>{
    const finddata = await infoschema.find();
    return res.send(finddata);
});


router.get('/findOne',async(req,res)  =>{
    const finddata = await infoschema.findOne({firstname:req.query.firstname});
    return res.send(finddata);
});

router.get('/findById',async(req,res)  =>{
    const finddata = await infoschema.findById({_id : req.query.id})
    return res.status(200).json({finddata});
});


router.put('/update',async(req,res)=>{
    console.log(1);
    console.log(req.body);
    const update = await infoschema.findByIdAndUpdate({_id:req.body.id},
        {
            $set : {
                firstname :req.body.firstname
            }           
        },
        {new : true}
        )
    return res.send(update);
            });


router.put('/updateOne',async(req,res)=>{
    console.log(req.body);
    const update = await infoschema.findOneAndUpdate({city : req.body.city},
        {
            $set : {
                firstname :req.body.firstname
            }           
        },
        {new : true}
        )
    return res.send(update);
    });


    {
                
    }
router.put('/updateMany',async(req,res)=>{
    const update = await infoschema.updateMany({city : req.body.city},
        {
            $set : {
                city : ""
            }           
        },
        {new : true}
    )
    return res.send(update);
            });

router.delete('/delete',async(req,res)=>{
    const Delete = await infoschema.findByIdAndRemove({_id:req.body.id},
    )          
    return res.send(Delete);
});

router.delete('/delete',async(req,res)=>{
    const Delete = await infoschema.findByIdAndDelete({_id:req.body.id},
    )          
    return res.send(Delete);
});



router.delete('/delete',async(req,res)=>{
    const Delete = await infoschema.findByOneAndDelete({_id:req.body.id},
    )          
    return res.send(Delete);
});

router.delete('/deleteMany',async(req,res)=>{
    const Delete = await infoschema.deleteMany();
    return res.send(Delete);
}); 


router.delete('/deleteOne',async(req,res)=>{
    const Delete = await infoschema.deleteOne({firstname : req.body.firstname});
    return res.send(Delete);
});



    


module.exports = router;